# DevLog Diff Helper

**DevLog Diff Helper** 是一个专为程序员、AI 辅助开发者、每日开发日志（DevLog）工作流打造的 VS Code 扩展。  
它能够自动收集「今日未提交的真实 Git diff」，并以 **极度 Codex 友好、结构化的格式** 输出到剪贴板，帮助你快速生成开发总结、长期记忆输入、与 AI 的高效协作。

---

# 🚀 功能特性

### ✅ 一键复制「今日真实改动」
点击右下角状态栏按钮 `$(git-commit) Copy Diff` 即可自动：
- 检测今天被修改过的文件  
- 检测这些文件的 Git 未提交内容  
- 按文件分组输出真实 diff  
- 自动复制到剪贴板  

完全适合用于每日总结、AI 代码回顾、个人 DevLog。

---

### ✅ Codex / GPT 最佳格式输出
每个文件的 diff 以结构化方式呈现：

```
==================== FILE: src/index.ts ====================
<diff 内容>
================ END OF FILE: src/index.ts ================
```

让 AI 能够：
- 按文件准确总结  
- 看清模块结构  
- 快速看到当天代码变化  
- 准确学习你的编码习惯  

非常适合搭配 Codex / GPT 自动生成 DevLog。

---

### ✅ 今日修改文件摘要
扩展会自动生成文件列表，帮助 AI 理解整体工作量：

```
# 今日修改文件（3 个）
- src/index.ts
- src/utils/time.ts

# 以下为按文件分组的详细 diff：
```

---

### ✅ 错误提示节流（不会弹窗轰炸）
多次运行出错时会自动抑制重复提示，让体验更清爽。

---

### ✅ 500 KB 安全截断
如果 diff 太大（超过 500KB），扩展会自动截断并提示，  
避免 AI 因内容过长而失败。

---

# 📦 安装与使用

### 方式 A：通过 VSIX 本地安装（当前推荐）

1. 从本项目的 Release 页面或其他来源获取 `.vsix` 文件，例如：
   - `devlog-diff-helper-0.0.1.vsix`
2. 打开 VS Code。
3. 打开扩展视图：
   - 左侧边栏点击 **Extensions（扩展）** 图标，或使用快捷键 `Ctrl+Shift+X`（Windows/Linux） / `Cmd+Shift+X`（macOS）。
4. 在扩展视图右上角点击 `···` 菜单，选择 **“Install from VSIX...” / “从 VSIX 安装...”**。
5. 选择刚刚下载的 `.vsix` 文件，确认安装。
6. 安装完成后，按提示 **Reload / 重新加载** VS Code（如果有），或手动重启 VS Code。

### 安装后如何使用

1. 在 VS Code 中打开一个包含 Git 仓库的文件夹（你的项目根目录）。  
2. 等待 VS Code 识别仓库后，右下角会出现状态栏按钮：
   
   ```
   $(git-commit) Copy Diff
   ```
3. 完成一天的编码后，点击该按钮，扩展会：
   - 检测今日修改过且有未提交改动的文件；
   - 生成按文件分组的 diff；
   - 将结果自动复制到剪贴板。
4. 打开你常用的 AI 工具（如 Codex / GPT），直接粘贴剪贴板中的内容，让 AI 生成 DevLog / 总结 / 长期记忆输入。

---

# 🛠 需求

必须：
- 已安装 **Git**
- 当前目录是 Git 仓库

可选：
- 推荐在 AI 开发工作流中使用（Codex / GPT）

---

# ⚙️ 扩展设置（未来版本）
当前版本无可配置项，所有行为开箱即用。  
未来会加入：
- 是否启用 diff 截断  
- 是否输出 Markdown diff  
- 自定义格式模板

---

# 🧩 已知问题

- Windows 下某些特殊字符路径可能导致 diff 命令异常（未来将采用 `execFile` 解决）
- 对极度庞大的项目，多文件 diff 可能稍有延迟

---

# 📝 发布日志

### 0.1.0  
- 初始版本  
- 支持多文件 diff  
- Codex 优化格式  
- 错误提示节流  
- 500KB 自动截断  

---

# 🤝 贡献

欢迎提交 Issue 或 PR，让这个扩展更强大！

---

# ❤️ 你的 DevLog 助手

无论你用它来：
- 每日代码总结  
- 学习 AI 编程  
- 分析自己的一天  
- 建立长期记忆体系  

DevLog Diff Helper 都会成为你最稳固的工具之一。

**Enjoy coding, enjoy logging!**
